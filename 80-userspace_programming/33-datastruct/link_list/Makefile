# update : 2019.05.13
# update : 2019.05.20 add gcc -v
# update : 2019.09 19 include libMakefile.mk for CFLAGS;
# update : 2019.09.28 add "make dlll100"

include ../../../lib_dramalife/libMakefile.mk

# If not set, default value is "-v"
CFLAGS ?= -v

BIN_NAME=a_demo
BIN_END=.out
SRC=$(wildcard ./*.c)

default:
	@echo "[ Help ]"
	@echo "make all 	: build main.c in current dir."
	@echo "make clean 	: clean files autogenerated."
	@echo "make dlll100 	: build main.c in use_dlll-v1.0.0(using link_list v1.0.0)."
	@echo "make dlll100-reset : reset changes made by make dlll100"

all:
	rm -rvf ./*$(BIN_END)
	gcc -c $(CFLAGS) $(SRC)
	gcc -c $(CFLAGS) ../../../lib_dramalife/gcc_related_lib/*.c
	gcc -c $(CFLAGS) ../../../lib_dramalife/link_list_lib/*.c
	gcc -o $(BIN_NAME)$(BIN_END) *.o

dlll100:
	cp ./main.c ./main.backup
	git checkout linklist-1.0.0 ./main.c
	@echo "\n\n\n"
	@echo "main.c backup to main.backup !!!"
	@echo "git checkout linklist-1.0.0 ./main.c !!!"
	@echo "\n\n\n"
	make all
dlll100-reset:
	git checkout master main.c
	cp ./main.backup ./main.c
	mv ./main.backup /tmp

clean:
	rm -rvf ./*.o
	rm -rvf ./*$(BIN_END)

.PHONY: clean
.PHONY: default

