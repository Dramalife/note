[ref-url 组播地址_百度百科](https://baike.baidu.com/item/%E7%BB%84%E6%92%AD/8946116?fr=aladdin)

# 组播协议

分为主机与路由器之间的组成员关系协议和路由器与路由器之间的组播路由协议。 



## IGMP

​	IGMP协议运行于主机和与主机直接相连的组播路由器之间，主机通过此协议告诉本地路由器希望加入并接受某个特定组播组的信息，同时路由器通过此协议周期性地查询局域网内某个已知组的成员是否处于活动状态（即该网段是否仍有属于某个组播组的成员），实现所连网络组成员关系的收集与维护。
​	IGMP有三个版本，IGMPv1由RFC1112定义，目前通用的是IGMPv2，由RFC2236定义。IGMPv3目前仍然是一个草案。IGMPv1中定义了基本的组成员查询和报告过程，IGMPv2在此基础上添加了组成员快速离开的机制，IGMPv3中增加的主要功能是成员可以指定接收或指定不接收某些组播源的报文。这里着重介绍IGMPv2协议的功能。
​	IGMPv2通过查询器选举机制为所连网段选举唯一的查询器。查询器周期性的发送普遍组查询消息进行成员关系查询；主机发送报告消息来应答查询。当要加入组播组时，主机不必等待查询消息，主动发送报告消息。当要离开组播组时，主机发送离开组消息；收到离开组消息后，查询器发送特定组查询消息来确定是否所有组成员都已离开。
​	通过上述IGMP机制，在组播路由器里建立起一张表，其中包含路由器的各个端口以及在端口所对应的子网上都有哪些组的成员。当路由器接收到某个组G的数据报文后，只向那些有G的成员的端口上转发数据报文。至于数据报文在路由器之间如何转发则由路由协议决定，IGMP协议并不负责。

## IGMP Snooping

​	IGMP Snooping的实现机理是：交换机通过侦听主机发向路由器的IGMP成员报告消息的方式，形成组成员和交换机接口的对应关系；交换机根据该对应关系将收到组播数据包只转给具有组成员的接口。
​	IGMP Proxy与IGMP Snooping实现功能相同但机理相异：IGMP snooping只是通过侦听IGMP的消息来获取有关信息，而IGMP Proxy则拦截了终端用户的IGMP请求并进行相关处理后，再将它转发给上层路由器。

## CGMP

​	CGMP(Cisco Group Management Protocol）是Cisco基于客户机/服务器模型开发的私有协议，在CGMP的支持下，组播路由器能够根据接收到的IGMP数据包通知交换机哪些主机何时加入和脱离组播组，交换机利用由这些信息所构建的转发表来确定将组播数据包向哪些接口转发。GMRP是主机到以太网交换机的标准协议，它使组播用户可以在第二层交换机上对组播成员进行注册。

## PIM-SM

​	众多的组播路由协议中，目前应用最多的协议是 PIM-SM稀疏模式协议无关组播。
​	在PIM-SM域中，运行PIM-SM协议的路由器周期性的发送Hello消息，用以发现邻接的PIM路由器，并且负责在多路访问网络中进行指定路由器（DR）的选举。这里，DR负责为其直连组成员朝着组播分发树根节点的方向发送"加入/剪枝"消息，或是将直连组播源的数据发向组播分发树。

